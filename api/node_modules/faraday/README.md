Faraday
=======
A lightweight MVC framework.

To begin, run the following the in the root of your app:

<pre><code>coffee node_modules/faraday/new.coffee</code></pre>

Now you can access faraday throught the folders <code>models</code>, <code>views</code>, and <code>controllers</code>.

The Server
----------

To run the server, run 

<pre><code>./develop</code></pre>

If you get this:

<pre><code>-bash: ./develop: Permission denied</code></pre>

Run this:

<pre><code>chmod +x develop</code></pre>

This gives develop executable permission. To get develop to work, you may need to install the ruby gem called <a href='http://sass-lang.com/'>sass</a>.

Models and Modooses
-------------------

I have abandoned the old <code>models</code> folder in favor of the <code>modooses</code> model. You can still use <code>models</code>, but they are deprecated and will be removed in subsequent versions. 

A modoose is a humorous malamoneau of "model" and "mongoose". (I can hear you laughing). Each modoose corresponds to a mongoose model in a coffee file in the modooses folder. To create a modoose called Foo, save the file <code>./modooses/Foo.cofffee</code>: 

<pre><code>fooSchema = # a mongoose schema for Foo...

module.exports = require('mongoose').model('Foo', fooSchema)</code></pre>

Faraday will create this model in the database and you can access it asynchronously as: 

<pre><code>require('faraday').modoose(({Foo}) -> 
    foo = Foo.find({bar: 'baz'})
    # Do things with the Foo modoose.
)</code></pre>

Views
-----

In your <code>views</code> folder, put files the form <code>filename.html.underscorecoffee</code>. These will be compiled as underscore.js (HTML) templates. You can invoke them as <code>require('faraday').view.filename(scope)</code>. The <code>scope</code> object will become the scope in the underscore.js template. That way you can pass variables and data for the template to render. 

Controllers
-----------

In your <code>controller</code> folder, put coffeescript files. If you create a file <code>./controllers/foo.coffee</code> with the following:

<pre><code>myRequestHandler = (req, res) -> 
    #handle the request
    
module.exports = myRequestHandler</code></pre>

Then navigate to <code>localhost:3000/foo</code>, myRequestHandler will be invoked with two arguments: the node.js request object and response object. I commonly require views in a controller and invoke some corresponding view. 

Faraday will map directories in the controllers folder to path components in the url. For example, if you save the aforementioned coffescript as <code>./controllers/several/nested/directories/foo.coffee</code> myRequestHandler will be invoked when you navigate to <code>localhost:3000/several/nested/directories/foo</code>. You can also create path components by nesting the routing object:

<pre><code>myRequestHandler = (req, res) -> 
    #handle the request
    
module.exports = 
    several:
        nested:
            directories:
                foo: myRequestHandler</code></pre>

You can inspect how this works by reading <code>node_modules/faraday/route.coffee</code>.


